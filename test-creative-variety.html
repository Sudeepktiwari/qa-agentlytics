<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creative Followup Variety Test</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .test-container {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .before-after {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }
      .before {
        background: #fff3cd;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #ffc107;
      }
      .after {
        background: #d1ecf1;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #17a2b8;
      }
      .message-example {
        background: #f8f9fa;
        padding: 12px;
        border-radius: 6px;
        margin: 8px 0;
        font-style: italic;
        border-left: 3px solid #6c757d;
      }
      .creative-patterns {
        background: #e7f3ff;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
      }
      .pattern-type {
        font-weight: bold;
        color: #0066cc;
        margin-top: 10px;
      }
      .test-button {
        background: #28a745;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      .test-button:hover {
        background: #218838;
      }
      .variety-score {
        font-size: 18px;
        font-weight: bold;
        padding: 10px;
        border-radius: 6px;
        text-align: center;
        margin: 10px 0;
      }
      .good-variety {
        background: #d4edda;
        color: #155724;
      }
      .poor-variety {
        background: #f8d7da;
        color: #721c24;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ¨ Creative Followup Variety Enhancement</h1>
    <p>
      Testing the new creative patterns to eliminate repetitive "Struggling
      with..." openings.
    </p>

    <div class="test-container">
      <h2>ğŸ”„ Before vs After Comparison</h2>

      <div class="before-after">
        <div class="before">
          <h3>âŒ Before (Repetitive)</h3>
          <div class="message-example">
            "Struggling with client scheduling and payments? Discover how
            efficient recurring bookings can streamline your fitness business."
          </div>
          <div class="message-example">
            "Struggling with client management and scheduling? Discover how
            automated bookings can streamline your fitness business."
          </div>
          <div class="message-example">
            "Struggling with client scheduling and payments? Discover how easy
            it is to manage appointments and boost marketing."
          </div>
          <p>
            <strong>Issue:</strong> All start with "Struggling with..." - sounds
            robotic and formulaic!
          </p>
        </div>

        <div class="after">
          <h3>âœ… After (Creative Variety)</h3>
          <div class="message-example">
            "Ready to automate your client bookings? Save 15 hours weekly with
            smart scheduling that handles payments too."
          </div>
          <div class="message-example">
            "Managing a fitness business? Join 500+ trainers who boosted revenue
            40% with automated booking systems."
          </div>
          <div class="message-example">
            "Want recurring clients without the scheduling hassle? See how top
            studios streamline everything in one platform."
          </div>
          <p>
            <strong>Improvement:</strong> Varied openings, different emotional
            hooks, more engaging!
          </p>
        </div>
      </div>
    </div>

    <div class="test-container">
      <h2>ğŸ¯ New Creative Patterns</h2>

      <div class="creative-patterns">
        <div class="pattern-type">ğŸ’¡ Curiosity-Based:</div>
        <p>"Ready to...", "Want to...", "Looking to...", "Curious about..."</p>

        <div class="pattern-type">ğŸ“ˆ Benefit-Focused:</div>
        <p>
          "Save 15 hours weekly with...", "Cut costs by 40% using...", "Boost
          revenue with..."
        </p>

        <div class="pattern-type">â“ Question-Based:</div>
        <p>
          "Managing a team?", "Growing fast?", "Need better...", "Exploring
          options?"
        </p>

        <div class="pattern-type">ğŸ¯ Solution-Oriented:</div>
        <p>
          "Here's how...", "Perfect for...", "Ideal when...", "Great for..."
        </p>

        <div class="pattern-type">ğŸ¢ Industry-Specific:</div>
        <p>
          "For fitness studios...", "Most trainers find...", "Popular with
          coaches..."
        </p>

        <div class="pattern-type">ğŸ‘¥ Social Proof:</div>
        <p>
          "Join 500+ who...", "Like other studios...", "Popular choice for..."
        </p>

        <div class="pattern-type">ğŸš€ Achievement:</div>
        <p>
          "Get results in minutes", "Most users see...", "Proven to increase..."
        </p>
      </div>
    </div>

    <div class="test-container">
      <h2>ğŸ§ª Live Variety Test</h2>
      <p>Generate multiple followups to test creative variety:</p>

      <button class="test-button" onclick="testVariety()">
        ğŸ² Test Creative Variety (5 Messages)
      </button>
      <button class="test-button" onclick="clearResults()">
        ğŸ§¹ Clear Results
      </button>

      <div id="varietyResults"></div>
      <div id="varietyScore"></div>
    </div>

    <div class="test-container">
      <h2>ğŸ“Š Expected Improvements</h2>

      <h3>âœ… User Experience:</h3>
      <ul>
        <li>
          <strong>More Engaging:</strong> Different emotional hooks keep users
          interested
        </li>
        <li>
          <strong>Less Robotic:</strong> Variety makes conversations feel
          natural
        </li>
        <li>
          <strong>Higher Response Rate:</strong> Creative openings capture
          attention better
        </li>
      </ul>

      <h3>âœ… Technical Benefits:</h3>
      <ul>
        <li>
          <strong>Smart Pattern Detection:</strong> AI avoids repetitive
          patterns
        </li>
        <li>
          <strong>Context-Aware:</strong> Chooses appropriate tone for each
          situation
        </li>
        <li>
          <strong>Persona-Specific:</strong> Matches creativity level to
          audience
        </li>
      </ul>

      <h3>âœ… Business Impact:</h3>
      <ul>
        <li>
          <strong>Better Brand Perception:</strong> Sounds more professional and
          thoughtful
        </li>
        <li>
          <strong>Higher Conversion:</strong> Varied approaches appeal to
          different personalities
        </li>
        <li>
          <strong>Competitive Advantage:</strong> Most chatbots are repetitive
          and boring
        </li>
      </ul>
    </div>

    <script>
      let generatedMessages = [];

      async function testVariety() {
        const resultsDiv = document.getElementById("varietyResults");
        const scoreDiv = document.getElementById("varietyScore");

        resultsDiv.innerHTML = "<p>ğŸ”„ Generating 5 creative followups...</p>";
        generatedMessages = [];

        try {
          for (let i = 0; i < 5; i++) {
            const response = await fetch("/api/chat", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                messages: [
                  {
                    role: "user",
                    content: `Test message ${i + 1} for fitness business`,
                  },
                ],
                adminId: "test-admin",
                url: "https://example-fitness-studio.com/booking",
                metadata: {
                  title: "Online Booking for Fitness Studios",
                  description:
                    "Automated scheduling and payment processing for fitness businesses",
                },
              }),
            });

            const data = await response.json();
            generatedMessages.push(data.mainText || "No message generated");

            resultsDiv.innerHTML += `
                        <div class="message-example">
                            <strong>Message ${i + 1}:</strong> ${
              data.mainText || "No message generated"
            }
                        </div>
                    `;
          }

          // Analyze variety
          analyzeVariety();
        } catch (error) {
          resultsDiv.innerHTML += `<div style="background: #f8d7da; color: #721c24; padding: 10px; border-radius: 4px;">âŒ Error: ${error.message}</div>`;
        }
      }

      function analyzeVariety() {
        const scoreDiv = document.getElementById("varietyScore");

        // Check for repetitive patterns
        const strugglingCount = generatedMessages.filter((msg) =>
          msg.toLowerCase().startsWith("struggling")
        ).length;

        const uniqueOpenings = new Set(
          generatedMessages.map((msg) => msg.split(" ").slice(0, 2).join(" "))
        ).size;

        const varietyScore = (uniqueOpenings / generatedMessages.length) * 100;

        let scoreClass = varietyScore >= 80 ? "good-variety" : "poor-variety";
        let scoreText =
          varietyScore >= 80
            ? `ğŸ‰ Excellent Variety: ${varietyScore.toFixed(
                0
              )}% unique openings!`
            : `âš ï¸ Low Variety: ${varietyScore.toFixed(
                0
              )}% unique openings. Needs improvement.`;

        scoreDiv.innerHTML = `
                <div class="variety-score ${scoreClass}">
                    ${scoreText}
                </div>
                <p><strong>Analysis:</strong></p>
                <ul>
                    <li>Messages starting with "Struggling": ${strugglingCount}/5</li>
                    <li>Unique opening patterns: ${uniqueOpenings}/5</li>
                    <li>Variety Score: ${varietyScore.toFixed(0)}%</li>
                </ul>
            `;
      }

      function clearResults() {
        document.getElementById("varietyResults").innerHTML = "";
        document.getElementById("varietyScore").innerHTML = "";
        generatedMessages = [];
      }
    </script>
  </body>
</html>
