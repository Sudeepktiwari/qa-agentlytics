<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mirror Debug Test</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        font-family: Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 200vh;
      }

      .section {
        background: white;
        margin: 20px 0;
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .pricing {
        background: #f8f9fa;
        border: 2px solid #007bff;
      }

      .features {
        background: #fff3cd;
        border: 2px solid #ffc107;
      }

      .contact {
        background: #f8d7da;
        border: 2px solid #dc3545;
      }

      h1,
      h2 {
        color: #333;
        margin-bottom: 20px;
      }

      p {
        line-height: 1.6;
        color: #666;
        margin-bottom: 15px;
      }

      .btn {
        background: #007bff;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 5px;
      }

      .btn:hover {
        background: #0056b3;
      }

      form {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-top: 20px;
      }

      input,
      textarea {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-sizing: border-box;
      }

      .debug-panel {
        position: fixed;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 15px;
        border-radius: 8px;
        font-family: monospace;
        font-size: 12px;
        z-index: 999999;
        max-width: 300px;
      }

      .debug-panel button {
        background: #28a745;
        color: white;
        border: none;
        padding: 5px 10px;
        margin: 2px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 11px;
      }
    </style>
  </head>
  <body>
    <div class="debug-panel">
      <strong>Mirror Debug Panel</strong><br />
      <button onclick="debugMirror()">Debug Mirror</button>
      <button onclick="forceMirror()">Force Mirror</button>
      <button onclick="toggleMirror()">Toggle Mirror</button>
      <div id="debug-output"></div>
    </div>

    <div class="section">
      <h1>Welcome to Our Amazing Product</h1>
      <p>
        This is the hero section where we introduce our product. The chatbot
        should detect when users are reading this section and offer contextual
        help.
      </p>
      <button class="btn">Get Started</button>
      <button class="btn">Learn More</button>
    </div>

    <div class="section features" data-section="features">
      <h2>üöÄ Features</h2>
      <p>
        Here are our amazing features that will revolutionize your workflow.
        Users typically spend time here comparing different capabilities.
      </p>
      <ul>
        <li>Real-time collaboration</li>
        <li>Advanced analytics</li>
        <li>Smart automation</li>
        <li>Enterprise security</li>
      </ul>
      <p>
        The bot should offer demos or detailed explanations when users scroll
        through this section.
      </p>
    </div>

    <div class="section pricing" data-section="pricing">
      <h2>üí∞ Pricing Plans</h2>
      <p>
        Choose the perfect plan for your needs. This is where most users make
        their decision!
      </p>

      <div style="display: flex; gap: 20px; margin: 20px 0">
        <div
          style="flex: 1; background: white; padding: 20px; border-radius: 8px"
        >
          <h3>Starter - $9/month</h3>
          <p>Perfect for small teams</p>
          <button class="btn">Choose Plan</button>
        </div>
        <div
          style="flex: 1; background: white; padding: 20px; border-radius: 8px"
        >
          <h3>Pro - $29/month</h3>
          <p>For growing businesses</p>
          <button class="btn">Choose Plan</button>
        </div>
        <div
          style="flex: 1; background: white; padding: 20px; border-radius: 8px"
        >
          <h3>Enterprise - Custom</h3>
          <p>For large organizations</p>
          <button class="btn">Contact Sales</button>
        </div>
      </div>
    </div>

    <div class="section contact" data-section="contact">
      <h2>üìû Contact Us</h2>
      <p>
        Ready to get started? Fill out this form and we'll get back to you
        within 24 hours.
      </p>

      <form>
        <input type="text" placeholder="Your Name" required />
        <input type="email" placeholder="Your Email" required />
        <input type="text" placeholder="Company Name" />
        <textarea placeholder="Tell us about your needs" rows="4"></textarea>
        <button type="submit" class="btn">Send Message</button>
      </form>
    </div>

    <div class="section">
      <h2>üéØ About Our Mission</h2>
      <p>
        We believe in making technology accessible to everyone. Our mission is
        to create tools that empower teams to do their best work.
      </p>
      <p>Scroll down to see more content and test the mirror functionality!</p>
    </div>

    <div class="section">
      <h2>üë• Customer Testimonials</h2>
      <blockquote
        style="
          border-left: 4px solid #007bff;
          padding-left: 20px;
          margin: 20px 0;
          font-style: italic;
        "
      >
        "This product has transformed how our team works. The ROI was visible
        within the first month!"
        <br /><strong>- Sarah Johnson, CEO of TechCorp</strong>
      </blockquote>

      <blockquote
        style="
          border-left: 4px solid #007bff;
          padding-left: 20px;
          margin: 20px 0;
          font-style: italic;
        "
      >
        "The customer support is amazing. They helped us set up everything
        perfectly."
        <br /><strong>- Mike Chen, CTO of StartupXYZ</strong>
      </blockquote>
    </div>

    <script>
      // Debug functions
      function debugMirror() {
        if (window.appointyChatbot) {
          const result = window.appointyChatbot.debugMirror();
          document.getElementById("debug-output").innerHTML =
            "<br>Debug: " + JSON.stringify(result, null, 2);
          console.log("Mirror Debug:", result);
        } else {
          document.getElementById("debug-output").innerHTML =
            "<br>Chatbot not loaded yet!";
        }
      }

      function forceMirror() {
        if (window.appointyChatbot) {
          const result = window.appointyChatbot.forceMirrorInit();
          document.getElementById("debug-output").innerHTML =
            "<br>Force: " + result;
          console.log("Force Mirror Result:", result);
        } else {
          document.getElementById("debug-output").innerHTML =
            "<br>Chatbot not loaded yet!";
        }
      }

      function toggleMirror() {
        if (window.appointyChatbot) {
          window.appointyChatbot.toggleMirror();
          document.getElementById("debug-output").innerHTML =
            "<br>Toggled mirror";
        } else {
          document.getElementById("debug-output").innerHTML =
            "<br>Chatbot not loaded yet!";
        }
      }

      // Auto-debug after a delay
      setTimeout(() => {
        debugMirror();
      }, 3000);

      // Log scroll events
      let scrollTimeout;
      window.addEventListener("scroll", () => {
        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => {
          console.log(
            "Scrolled to:",
            window.scrollY,
            "of",
            document.documentElement.scrollHeight
          );
        }, 100);
      });
    </script>

    <!-- Load the chatbot widget -->
    <script>
      (function () {
        // Remove existing widget if any
        document
          .querySelectorAll('[id*="chatbot"], [id*="widget"], [id*="appointy"]')
          .forEach((el) => el.remove());

        // Create and inject script
        const s = document.createElement("script");
        s.src = "http://localhost:3000/api/widget"; // Use localhost for testing
        s.onload = () => {
          console.log("‚úÖ Widget loaded successfully");
          document.getElementById("debug-output").innerHTML =
            "<br>‚úÖ Widget loaded!";
        };
        s.onerror = () => {
          console.error("‚ùå Widget failed to load");
          document.getElementById("debug-output").innerHTML =
            "<br>‚ùå Widget failed to load!";
        };

        // Set attributes before adding to DOM
        [
          "data-api-key|ak_e8a971aee600130a0dcc93ca0fbb8831e366c4566f6b80426991b4ed6c8f9848",
          "data-theme|blue",
          "data-size|large",
          "data-voice-enabled|false",
          "data-voice-gender|female",
          "data-auto-open-proactive|true",
          "data-mirror-mode|true",
          "data-mirror-scale|auto",
        ].forEach((attr) => {
          const [name, value] = attr.split("|");
          s.setAttribute(name, value);
        });

        document.head.appendChild(s);
      })();
    </script>
  </body>
</html>
